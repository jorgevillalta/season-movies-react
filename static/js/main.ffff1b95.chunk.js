(this["webpackJsonpseason-movies-react"]=this["webpackJsonpseason-movies-react"]||[]).push([[0],{175:function(e,t,n){"use strict";n.r(t);n(130),n(131),n(132),n(133),n(134),n(135);var r,c=n(0),o=n.n(c),i=n(13),a=n.n(i),s=n(41),u=n(14),l=n(18),d=n(53),j=n(179),b=n(33),O=n(180),p=n(16),f=n(9),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0,c=t[r.type];return c?c(n,r):n}},m=function(e,t){return Object(f.a)({type:e},t)},g=function(e,t,n){return function(r){return r(m("".concat(e,"_START"),{request:n})),t(n).then((function(t){return r(m("".concat(e,"_SUCCESS"),{response:t}))})).catch((function(t){return r(m("".concat(e,"_ERROR"),{error:t}))}))}},h={isLoading:!1,response:null,request:null},_=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,c=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,request:t.request})},o=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,response:t.response})},i=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,error:t.error})};return v(r,Object(f.a)((t={},Object(p.a)(t,"".concat(e,"_START"),c),Object(p.a)(t,"".concat(e,"_SUCCESS"),o),Object(p.a)(t,"".concat(e,"_ERROR"),i),t),n))},x=n(20),E=n.n(x),S=n(36),w=Object({NODE_ENV:"production",PUBLIC_URL:"/season-movies-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MOVIE_DB_API_KEY:"33ef91cd9e22b07296ac1826b0c0c4a9",REACT_APP_MOVIE_DB_BASE_URL:"https://api.themoviedb.org/3",REACT_APP_MOVIE_IMAGE_BASE_URL:"https://image.tmdb.org/t/p/w"}),y=w.REACT_APP_MOVIE_DB_API_KEY,C=w.REACT_APP_MOVIE_DB_BASE_URL,I=function(e,t){var n="".concat(C).concat(e,"?api_key=").concat(y,"&language=en-US");return t&&Object.keys(t).forEach((function(e){return n+="&".concat(e,"=").concat(t[e])})),n},D=function(e){return fetch(e).then((function(e){return e.json().then((function(t){return e.ok?Object(f.a)({},t):Promise.reject(t)}))}))},L=function(){var e=Object(S.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=I("/movie/".concat(n)),e.abrupt("return",D(r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(S.a)(E.a.mark((function e(t){var n,r,c,o,i,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.date,r=void 0===n?new Date:n,c=t.page,o=void 0===c?1:c,r instanceof Date){e.next=3;break}return e.abrupt("return",Promise.reject("incorrect date object"));case 3:return(i=new Date(r.getTime())).setMonth(r.getMonth()-1),a=I("/discover/movie",{page:o,language:"en-US",region:"US",sort_by:"popularity.desc",include_adult:!1,"primary_release_date.gte":i.toISOString().split("T")[0],"primary_release_date.lte":r.toISOString().split("T")[0]}),e.abrupt("return",D(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T="GET_MOVIES",A="SEARCH_MOVIES",P="GET_MOVIE_DETAILS",R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return g(T,M,{date:e,page:t,reset:n})},k=n(35),B="https://image.tmdb.org/t/p/w",F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return"".concat(B).concat(e)},N=function(e){return e?Object(k.a)(e.results.map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object(f.a)(Object(f.a)({},e),{},{backdrop_path:e.backdrop_path&&"".concat(F(t)).concat(e.backdrop_path),poster_path:e.poster_path&&"".concat(F(t)).concat(e.poster_path)})}(e)})).sort((function(e,t){return t.popularity-e.popularity}))):null},U=u.c.div(r||(r=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  justify-content: space-between;\n  align-content: stretch;\n  align-items: flex-start;\n\n  & > * {\n    margin: 6px;\n  }\n"]))),V=n(4);var G=function(e){var t=e.isLoading,n=e.children;return t?Object(V.jsx)(j.o,{size:50,value:null}):n||null},Y="OPEN_MOVIE_MODAL",q="CLOSE_MOVIE_MODAL",H=n(23),K=n(2);var W,J=(W=u.c.div.withConfig({displayName:"MoviePoster",componentId:"sc-1ltn66a-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:center;cursor:pointer;max-width:",";& > *{margin-bottom:2px;}"],(function(e){return e.maxWidth||"100%"})),function(e){return Object(V.jsx)(W,Object(f.a)({className:e.loading&&K.a.SKELETON},e))}),z=u.c.img.withConfig({displayName:"MoviePoster__Image",componentId:"sc-1ltn66a-1"})(["max-width:100%;"]),$=Object(u.c)((function(e){var t=Object.assign({},e);return Object(V.jsx)(j.p,Object(f.a)({fill:!0,intent:H.a.PRIMARY},t))})).withConfig({displayName:"MoviePoster__Title",componentId:"sc-1ltn66a-2"})([""]);J.Image=z,J.Title=$;var Q,X,Z,ee=J,te=function(e){var t=e.movie,n=e.onClick;return Object(V.jsxs)(ee,{onClick:n,maxWidth:"300px",children:[Object(V.jsx)(ee.Image,{src:t.poster_path}),Object(V.jsx)(ee.Title,{children:t.title})]})},ne=function(e){var t=e.movie,n=Object(l.c)(),r=Object(c.useCallback)((function(){return n((e=t.id,{type:Y,movieId:e}));var e}),[n,t.id]);return Object(V.jsx)(te,{movie:t,onClick:r})},re=function(e){var t=e.movies,n=e.isLoading;return Object(V.jsxs)(U,{children:[t&&t.map((function(e){return Object(V.jsx)(ne,{movie:e},e.id)})),Object(V.jsx)(G,{isLoading:n})]})},ce=Object(u.c)(j.b).withConfig({displayName:"MovieModal__StyledDialog",componentId:"sc-1d4f9nh-0"})([""]),oe=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return{isOpen:e.movieBrowser.movieModal.isOpen||!1,movieId:e.movieBrowser.movieModal.movieId,isLoading:e.movieBrowser.movieDetails.isLoading||!1,response:e.movieBrowser.movieDetails.response}}),l.b),n=t.isOpen,r=t.movieId,o=t.isLoading,i=t.response;Object(c.useEffect)((function(){r&&e(function(e){return g(P,L,{movieId:e})}(r))}),[e,r]);var a,s=(a=(a=i)||{},Object(c.useMemo)((function(){return Object(f.a)(Object(f.a)({},a),{},{date:a.release_date&&new Date(a.release_date).toLocaleDateString()||"",genres:a.genres?a.genres.map((function(e){return e.name})).join(", "):"",budget:a.budget&&"$".concat(a.budget.toLocaleString())||"(unknown)"})}),[a])),u=s.title,d=s.date,b=s.genres,O=s.overview,p=s.popularity,v=s.budget,m=Object(c.useCallback)((function(){e({type:q})}),[e]);return Object(V.jsx)(ce,{title:null,onClose:m,isOpen:n,children:Object(V.jsx)("div",{className:K.a.DIALOG_BODY,children:Object(V.jsxs)(G,{isLoading:o,children:[Object(V.jsx)(j.d,{children:u}),Object(V.jsx)(j.e,{children:d}),Object(V.jsx)(j.e,{children:b}),Object(V.jsx)("p",{children:O}),Object(V.jsxs)("p",{children:["Popularity: ",p]}),Object(V.jsxs)("p",{children:["Budget: ",v]})]})})})},ie=u.c.div.withConfig({displayName:"MoviePage__StyledContentDiv",componentId:"sc-1hx1xb2-0"})(["&&{margin-top:64px;}"]),ae=u.c.div.withConfig({displayName:"MoviePage__StyledGridDiv",componentId:"sc-1hx1xb2-1"})(["&&{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:flex-start;& > *{margin:12px;}}"]),se=function(){var e=Object(l.c)(),t=Object(c.useState)(1),n=Object(d.a)(t,2),r=n[0],o=n[1],i=Object(c.useState)(new Date("1983-06-13")),a=Object(d.a)(i,2),s=a[0],u=a[1],p=Object(l.d)((function(e){return e.movieBrowser.movieList})),f=p.response,v=p.isLoading,m=N(f);return Object(c.useEffect)((function(){e(R(s,1,!0))}),[e,s]),Object(c.useEffect)((function(){var t=function(){if(!v&&function(e){var t=e.document.documentElement.scrollHeight,n=e.document.documentElement.clientHeight;return(e.pageYOffset+n)/t}(window)>.8){var t=r+1;e(R(s,t)),o(t)}};return window.onscroll=t,function(){return window.removeEventListener("scroll",t)}}),[e,r,v,s]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.k,{fixedToTop:!0,className:"bp3-dark",children:Object(V.jsx)(j.l,{align:b.a.LEFT,children:Object(V.jsx)(j.m,{children:"Season Movies"})})}),Object(V.jsxs)(ie,{children:[Object(V.jsx)("div",{}),Object(V.jsxs)(ae,{children:[Object(V.jsx)("div",{children:Object(V.jsx)(O.a,{formatDate:function(e){return e.toLocaleDateString()},onChange:function(e,t){t&&u(new Date(e))},parseDate:function(e){return new Date(e)},placeholder:"D/M/YYYY",minDate:new Date("1902-01-01")})}),Object(V.jsx)("div",{children:Object(V.jsx)(re,{movies:m,isLoading:v})})]})]}),Object(V.jsx)(oe,{})]})},ue=n(19),le=n(80),de=n(81),je=n(82),be=v({isOpen:!1,movieId:void 0},(Q={},Object(p.a)(Q,Y,(function(e,t){return{isOpen:!0,movieId:t.movieId}})),Object(p.a)(Q,q,(function(e,t){return Object(f.a)(Object(f.a)({},e),{},{isOpen:!1})})),Q)),Oe=function(e,t){var n=e.response?e.response.results:[];return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,response:Object(f.a)(Object(f.a)({},t.response),{},{results:[].concat(Object(k.a)(n),Object(k.a)(t.response.results))})})},pe=Object(ue.combineReducers)({movieModal:be,movieList:_(T,(X={},Object(p.a)(X,"".concat(T,"_START"),(function(e,t){var n=e.response&&!t.request.reset?Object(f.a)({},e.response):void 0;return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0,request:t.request,response:n})})),Object(p.a)(X,"".concat(T,"_SUCCESS"),Oe),X)),movieSearch:_(A,Object(p.a)({},"".concat(A,"_SUCCESS"),Oe)),movieDetails:_(P)}),fe=Object(ue.combineReducers)({movieBrowser:pe}),ve=Object(de.createLogger)(),me=Object(ue.createStore)(fe,void 0,Object(le.composeWithDevTools)(Object(ue.compose)(Object(ue.applyMiddleware)(je.a,ve)))),ge=Object(u.b)(Z||(Z=Object(s.a)(["\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n  }\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n  }\n"]))),he={colors:{lightGray1:"#CED9E0",lightGray2:"#D8E1E8",lightGray3:"#E1E8ED",lightGray4:"#EBF1F5",lightGray5:"#F5F8FA"}};var _e=function(){return Object(V.jsx)(u.a,{theme:he,children:Object(V.jsx)(l.a,{store:me,children:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(se,{}),Object(V.jsx)(ge,{})]})})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,181)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};a.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(_e,{})}),document.getElementById("root")),xe()}},[[175,1,2]]]);
//# sourceMappingURL=main.ffff1b95.chunk.js.map