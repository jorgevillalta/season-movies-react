(this["webpackJsonpseason-movies-react"]=this["webpackJsonpseason-movies-react"]||[]).push([[0],{173:function(e,t,n){"use strict";n.r(t);n(128),n(129),n(130),n(131),n(132),n(133);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),o=n(40),s=n(14),u=n(17),l=n(79),d=n(177),p=n(33),f=n(178),j=n(15),b=n(13),m=n.n(b),v=n(20),O=n(18),g=(n(80),"https://image.tmdb.org/t/p/w"),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;return"".concat(g).concat(e)};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return Object(j.a)(Object(j.a)({},e),{},{backdrop_path:e.backdrop_path&&"".concat(h(t)).concat(e.backdrop_path),poster_path:e.poster_path&&"".concat(h(t)).concat(e.poster_path)})}function _(e){return e.map((function(e){return x(e)}))}var y,w=Object({NODE_ENV:"production",PUBLIC_URL:"/season-movies-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MOVIE_DB_API_KEY:"33ef91cd9e22b07296ac1826b0c0c4a9",REACT_APP_MOVIE_DB_BASE_URL:"https://api.themoviedb.org/3",REACT_APP_MOVIE_IMAGE_BASE_URL:"https://image.tmdb.org/t/p/w"}),S=w.REACT_APP_MOVIE_DB_API_KEY,E=w.REACT_APP_MOVIE_DB_BASE_URL,D=function(e,t){var n="".concat(E).concat(e,"?api_key=").concat(S,"&language=en-US");return t&&Object.keys(t).forEach((function(e){return n+="&".concat(e,"=").concat(t[e])})),n},C=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=6;break}throw r="An error has occured: ".concat(n.status),new Error(r);case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",Object(j.a)({},a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=D("/movie/".concat(n)),e.next=4,C(r);case 4:return a=e.sent,c=x(a),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a,c,i,o,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.date,r=void 0===n?new Date:n,a=t.page,c=void 0===a?1:a,r instanceof Date){e.next=3;break}return e.abrupt("return",Promise.reject("incorrect date object"));case 3:return(i=new Date(r.getTime())).setMonth(r.getMonth()-1),o=D("/discover/movie",{page:c,language:"en-US",region:"US",sort_by:"popularity.desc",include_adult:!1,"primary_release_date.gte":i.toISOString().split("T")[0],"primary_release_date.lte":r.toISOString().split("T")[0]}),e.next=8,C(o);case 8:return s=e.sent,u=_(s.results),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(O.d)(),L=I.getInitialState({isLoading:!1,currentPage:1,movieSelected:null}),T=Object(O.b)("movies/fetchMovies",function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r,a,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.date,a=void 0===r?new Date:r,n.getState,c=1,e.next=5,M({date:a,page:c});case 5:return i=e.sent,e.abrupt("return",{movieList:i,currentPage:c});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(O.b)("movies/fetchMoviesNext",function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r,a,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.date,a=n.getState,c=Y(a())+1,e.next=5,M({date:r,page:c});case 5:return i=e.sent,e.abrupt("return",{movieList:i,currentPage:c});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(O.b)("movies/fetctMovieDetail",function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r,a,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.movieId,a=n.getState,!(null===(c=U(a(),r))||void 0===c?void 0:c.detailLoaded)){e.next=5;break}return e.abrupt("return",{id:r,movieDetail:c});case 5:return e.next=7,P({movieId:r});case 7:return i=e.sent,e.abrupt("return",{id:r,movieDetail:i});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(O.e)({name:"movies",initialState:L,reducers:{},extraReducers:function(e){e.addCase(T.fulfilled,(function(e,t){I.setAll(e,t.payload.movieList),e.currentPage=t.payload.currentPage,e.isLoading=!1})).addCase(A.fulfilled,(function(e,t){I.addMany(e,t.payload.movieList),e.currentPage=t.payload.currentPage,e.isLoading=!1})).addCase(k.fulfilled,(function(e,t){var n=t.payload,r=n.id,a=n.movieDetail;I.updateOne(e,{id:r,changes:Object(j.a)(Object(j.a)({},a),{},{detailLoaded:!0})}),e.movieSelected=r,e.isLoading=!1})).addMatcher((function(e){return e.type.startsWith("movies/")&&e.type.endsWith("pending")}),(function(e,t){e.isLoading=!0,e.movieSelected=null}))}}).reducer,R=function(e){return e},B=I.getSelectors((function(e){return e.movies})),N=B.selectAll,U=B.selectById,Y=(B.selectTotal,Object(O.c)(R,(function(e){return e.movies.currentPage}))),G=Object(O.c)(R,(function(e){return e.movies.isLoading})),W=Object(O.c)(R,(function(e){return U(e,e.movies.movieSelected)})),H=s.c.div(y||(y=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  justify-content: space-between;\n  align-content: stretch;\n  align-items: flex-start;\n\n  & > * {\n    margin: 6px;\n  }\n"]))),K=n(4);var V=function(e){var t=e.isLoading,n=e.children;return t?Object(K.jsx)(d.p,{size:50,value:null}):n||null},J=n(23),q=n(2);var z,$=(z=s.c.div.withConfig({displayName:"MoviePoster",componentId:"sc-1ltn66a-0"})(["display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:center;cursor:pointer;max-width:",";& > *{margin-bottom:2px;}"],(function(e){return e.maxWidth||"100%"})),function(e){return Object(K.jsx)(z,Object(j.a)({className:e.loading&&q.a.SKELETON},e))}),Q=s.c.img.withConfig({displayName:"MoviePoster__Image",componentId:"sc-1ltn66a-1"})(["max-width:100%;"]),X=Object(s.c)((function(e){var t=Object.assign({},e);return Object(K.jsx)(d.q,Object(j.a)({fill:!0,intent:J.a.PRIMARY},t))})).withConfig({displayName:"MoviePoster__Title",componentId:"sc-1ltn66a-2"})([""]);$.Image=Q,$.Title=X;var Z,ee=$,te=function(e){var t=e.movie,n=e.onClick;return Object(K.jsxs)(ee,{onClick:n,maxWidth:"300px",children:[Object(K.jsx)(ee.Image,{src:t.poster_path}),Object(K.jsx)(ee.Title,{children:t.title})]})},ne=n(39),re=Object(O.e)({name:"layouts",initialState:{movieModal:"closed"},reducers:{layoutOpen:function(e,t){e[t.payload]="opened"},layoutClose:function(e,t){e[t.payload]="closed"}}}),ae=re.actions,ce=ae.layoutOpen,ie=ae.layoutClose,oe=re.reducer,se=Object(ne.a)((function(e){return e}),(function(e){return e.layouts.movieModal})),ue=Object(ne.a)(se,(function(e){return"opened"===e})),le=function(e){var t=e.movie,n=Object(u.b)();return Object(K.jsx)(te,{movie:t,onClick:function(){n(k({movieId:t.id})),n(ce("movieModal"))}})},de=function(e){var t=e.movies,n=e.isLoading;return Object(K.jsxs)(H,{children:[t&&t.map((function(e){return Object(K.jsx)(le,{movie:e},e.id)})),Object(K.jsx)(V,{isLoading:n})]})},pe=Object(s.c)(d.b).withConfig({displayName:"MovieModal__StyledDialog",componentId:"sc-1d4f9nh-0"})([""]),fe=function(){var e,t=Object(u.b)(),n=Object(u.c)(ue),a=Object(u.c)(G),c=(e=(e=Object(u.c)(W))||{},Object(r.useMemo)((function(){return Object(j.a)(Object(j.a)({},e),{},{date:e.release_date&&new Date(e.release_date).toLocaleDateString()||"",genres:e.genres?e.genres.map((function(e){return e.name})).join(", "):"",budget:e.budget&&"$".concat(e.budget.toLocaleString())||"(unknown)"})}),[e])),i=c.title,o=c.date,s=c.genres,l=c.overview,p=c.popularity,f=c.budget;return Object(K.jsx)(pe,{title:null,onClose:function(){return t(ie("movieModal"))},isOpen:n,children:Object(K.jsx)("div",{className:q.a.DIALOG_BODY,children:Object(K.jsxs)(V,{isLoading:a,children:[Object(K.jsx)(d.d,{children:i}),Object(K.jsx)(d.e,{children:o}),Object(K.jsx)(d.e,{children:s}),Object(K.jsx)("p",{children:l}),Object(K.jsxs)("p",{children:["Popularity: ",p]}),Object(K.jsxs)("p",{children:["Budget: ",f]})]})})})},je=s.c.div.withConfig({displayName:"MoviePage__StyledContentDiv",componentId:"sc-1hx1xb2-0"})(["&&{margin-top:64px;}"]),be=s.c.div.withConfig({displayName:"MoviePage__StyledGridDiv",componentId:"sc-1hx1xb2-1"})(["&&{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-content:stretch;align-items:flex-start;& > *{margin:12px;}}"]),me=function(){var e=Object(u.b)(),t=Object(r.useState)(new Date("1983-06-13")),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(u.c)(N),o=Object(u.c)(G);return Object(r.useEffect)((function(){e(T({date:a}))}),[e,a]),Object(r.useEffect)((function(){var t=function(){o||function(e){var t=e.document.documentElement.scrollHeight,n=e.document.documentElement.clientHeight;return(e.pageYOffset+n)/t}(window)>.95&&e(A({date:a}))};return window.onscroll=t,function(){return window.removeEventListener("scroll",t)}}),[e,o,a]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(d.l,{fixedToTop:!0,className:"bp3-dark",children:Object(K.jsx)(d.m,{align:p.a.LEFT,children:Object(K.jsx)(d.n,{children:"Season Movies"})})}),Object(K.jsxs)(je,{children:[Object(K.jsx)("div",{}),Object(K.jsxs)(be,{children:[Object(K.jsx)("div",{children:Object(K.jsx)(f.a,{formatDate:function(e){return e.toLocaleDateString()},onChange:function(e,t){t&&c(new Date(e))},parseDate:function(e){return new Date(e)},placeholder:"D/M/YYYY",minDate:new Date("1902-01-01"),value:a})}),Object(K.jsx)("div",{children:Object(K.jsx)(de,{movies:i,isLoading:o})})]})]}),Object(K.jsx)(fe,{})]})},ve=n(78),Oe=n.n(ve),ge=Object(O.a)({reducer:{movies:F,layouts:oe},middleware:function(e){return e().concat(Oe.a)}}),he=Object(s.b)(Z||(Z=Object(o.a)(["\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n  }\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n  }\n"]))),xe={colors:{lightGray1:"#CED9E0",lightGray2:"#D8E1E8",lightGray3:"#E1E8ED",lightGray4:"#EBF1F5",lightGray5:"#F5F8FA"}};var _e=function(){return Object(K.jsx)(s.a,{theme:xe,children:Object(K.jsx)(u.a,{store:ge,children:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(me,{}),Object(K.jsx)(he,{})]})})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,179)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(K.jsx)(a.a.StrictMode,{children:Object(K.jsx)(_e,{})}),document.getElementById("root")),ye()}},[[173,1,2]]]);
//# sourceMappingURL=main.45b06667.chunk.js.map