{"version":3,"sources":["common/redux.helpers.js","middleware/tmdb-api.js","actions/index.js","containers/helpers.js","blocks/MovieList.jsx","components/Loader.jsx","actions/modal.js","blocks/MoviePoster.jsx","blocks/helpers.js","components/MovieCard.jsx","containers/MovieContainer.jsx","containers/MovieGroup.jsx","containers/MovieModal.jsx","containers/MoviePage.jsx","common/scroll.helpers.js","reducers/modal.js","reducers/index.js","store/index.js","App.js","reportWebVitals.js","index.js"],"names":["createReducer","initialState","actionHandlerKeyFuncs","state","action","actionHandler","type","createAction","actionProps","createAsyncActionCreator","actionType","asyncRequestFn","requestParams","dispatch","request","then","json","response","catch","error","initialAsyncState","isLoading","createAsyncReducer","startReducerFn","successReducerFn","errorReducerFn","process","REACT_APP_MOVIE_DB_API_KEY","REACT_APP_MOVIE_DB_BASE_URL","createMovieDbUrl","relativeUrl","queryParams","baseUrl","Object","keys","forEach","paramName","callApi","endpoint","fetch","ok","Promise","reject","getMovieDetails","a","movieId","fullUrl","getMoviesInDate","date","Date","page","dateStart","getTime","setMonth","getMonth","language","region","sort_by","include_adult","toISOString","split","GET_MOVIES","SEARCH_MOVIES","GET_MOVIE_DETAILS","getMovies","reset","movieService","REACT_APP_MOVIE_IMAGE_BASE_URL","TMDB_IMAGE_BASE_URL","width","getMoviesList","moviesResponse","results","map","movieResult","backdrop_path","poster_path","updateMoviePictureUrls","sort","b","popularity","MovieList","styled","div","LoaderComponent","children","size","value","OPEN_MOVIE_MODAL","CLOSE_MOVIE_MODAL","Component","MoviePoster","props","maxWidth","className","loading","Classes","SKELETON","Image","img","Title","fill","intent","Intent","PRIMARY","MovieCard","movie","onClick","src","title","MovieContainer","useDispatch","clickOpenMovieModal","useCallback","id","MovieGroup","movies","Loader","StyledDialog","Dialog","MovieModal","useSelector","isOpen","movieBrowser","movieModal","movieDetails","shallowEqual","useEffect","useMemo","release_date","toLocaleDateString","genres","genre","name","join","budget","toLocaleString","overview","clickCloseMovieModal","onClose","DIALOG_BODY","StyledContentDiv","StyledGridDiv","MoviePage","useState","currentPage","setCurrentPage","birthDate","setBirthDate","movieList","movieHelpers","handleScroll","window","pageHeight","document","documentElement","scrollHeight","clientHeight","pageYOffset","scrollHelpers","nextPage","onscroll","removeEventListener","fixedToTop","align","Alignment","LEFT","formatDate","onChange","isUserChange","parseDate","str","placeholder","minDate","movieModalReducer","undefined","moviesSuccessReducer","existingMovies","movieBrowserReducer","combineReducers","movieSearch","rootReducer","loggerMiddleware","createLogger","store","createStore","composeWithDevTools","compose","applyMiddleware","thunkMiddlware","GlobalStyle","createGlobalStyle","theme","colors","lightGray1","lightGray2","lightGray3","lightGray4","lightGray5","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ffff1b95.chunk.js","sourcesContent":["// Helper function to enables passing an object with\n// the action.type as the key and the reducer function as the value\nexport const createReducer = (initialState = {}, actionHandlerKeyFuncs = {}) => {\n  return (state = initialState, action) => {\n    const actionHandler = actionHandlerKeyFuncs[action.type];\n    return actionHandler ? actionHandler(state, action) : state;\n  };\n};\n\n// Creates a basic action\nconst createAction = (type, actionProps) => {\n  return {\n    type,\n    ...actionProps\n  };\n};\n\n// e.g. createAsyncActionCreator('GET_TOP_MOVIES', getTopMovies, {page: 1})\n// I admit that passing the asyncRequestFn without params is not ideal, but\n// wanted to capture the requestParams as part of the start action for logging transparency\nexport const createAsyncActionCreator = (actionType, asyncRequestFn, requestParams) => {\n  return (dispatch) => {\n    dispatch(createAction(`${actionType}_START`, { request: requestParams }));\n    // NOTE: asyncRequestFn must accept single object parameter\n    // in order to resolve param values\n    return asyncRequestFn(requestParams)\n      .then((json) => dispatch(createAction(`${actionType}_SUCCESS`, { response: json })))\n      .catch((error) => dispatch(createAction(`${actionType}_ERROR`, { error })));\n  };\n};\n\n// We're setting these based on the state of the request\nconst initialAsyncState = { isLoading: false, response: null, request: null };\n\n// Generic way of handling state changes for an async request\n// Can override {action_type}_START, {action_type}_SUCCESS, {action_type}_ERROR\nexport const createAsyncReducer = (\n  actionType,\n  actionHandlerKeyFuncs = {},\n  initialState = initialAsyncState\n) => {\n  const startReducerFn = (state, action) => ({\n    ...state,\n    isLoading: true,\n    request: action.request\n  });\n  const successReducerFn = (state, action) => ({\n    ...state,\n    isLoading: false,\n    response: action.response\n  });\n  const errorReducerFn = (state, action) => ({\n    ...state,\n    isLoading: false,\n    error: action.error\n  });\n\n  return createReducer(initialState, {\n    [`${actionType}_START`]: startReducerFn,\n    [`${actionType}_SUCCESS`]: successReducerFn,\n    [`${actionType}_ERROR`]: errorReducerFn,\n    ...actionHandlerKeyFuncs\n  });\n};\n","const { REACT_APP_MOVIE_DB_API_KEY, REACT_APP_MOVIE_DB_BASE_URL } = process.env;\n\nconst createMovieDbUrl = (relativeUrl, queryParams) => {\n  let baseUrl = `${REACT_APP_MOVIE_DB_BASE_URL}${relativeUrl}?api_key=${REACT_APP_MOVIE_DB_API_KEY}&language=en-US`;\n  if (queryParams) {\n    Object.keys(queryParams).forEach(\n      (paramName) => (baseUrl += `&${paramName}=${queryParams[paramName]}`)\n    );\n  }\n  return baseUrl;\n};\n\nconst callApi = (endpoint) => {\n  return fetch(endpoint).then((response) =>\n    response.json().then((json) => {\n      if (!response.ok) {\n        return Promise.reject(json);\n      }\n\n      // normalization\n      // ...\n\n      return {\n        ...json\n      };\n    })\n  );\n};\n\nexport const getTopMovies = async ({ page }) => {\n  const fullUrl = createMovieDbUrl('/movie/upcoming', {\n    page\n  });\n  return callApi(fullUrl);\n};\n\nexport const searchMovies = async ({ page, query }) => {\n  const fullUrl = createMovieDbUrl('/search/movie', {\n    page,\n    query\n  });\n  return callApi(fullUrl);\n};\n\nexport const getMovieDetails = async ({ movieId }) => {\n  const fullUrl = createMovieDbUrl(`/movie/${movieId}`);\n  return callApi(fullUrl);\n};\n\nexport const getMoviesInDate = async ({ date = new Date(), page = 1 }) => {\n  if (!(date instanceof Date)) {\n    return Promise.reject('incorrect date object');\n  }\n\n  const dateStart = new Date(date.getTime());\n  dateStart.setMonth(date.getMonth() - 1);\n\n  const fullUrl = createMovieDbUrl('/discover/movie', {\n    page,\n    language: 'en-US',\n    region: 'US',\n    sort_by: 'popularity.desc',\n    include_adult: false,\n    'primary_release_date.gte': dateStart.toISOString().split('T')[0],\n    'primary_release_date.lte': date.toISOString().split('T')[0]\n  });\n  return callApi(fullUrl);\n};\n","import { createAsyncActionCreator } from '../common/redux.helpers';\nimport * as movieService from '../middleware/tmdb-api';\n\nexport const GET_MOVIES = 'GET_MOVIES';\nexport const SEARCH_MOVIES = 'SEARCH_MOVIES';\nexport const GET_MOVIE_DETAILS = 'GET_MOVIE_DETAILS';\n\nexport const getMovies = (date, page, reset = false) =>\n  createAsyncActionCreator(\n    // actionType\n    GET_MOVIES,\n    // requestFn\n    movieService.getMoviesInDate,\n    // requestParams\n    { date, page, reset }\n  );\n\nexport const searchMovies = (query, page) =>\n  createAsyncActionCreator(SEARCH_MOVIES, movieService.searchMovies, {\n    query,\n    page\n  });\n\nexport const getMovieDetails = (movieId) =>\n  createAsyncActionCreator(GET_MOVIE_DETAILS, movieService.getMovieDetails, {\n    movieId\n  });\n","const { REACT_APP_MOVIE_IMAGE_BASE_URL } = process.env;\n\nconst TMDB_IMAGE_BASE_URL = (width = 300) => `${REACT_APP_MOVIE_IMAGE_BASE_URL}${width}`;\n\nexport const updateMoviePictureUrls = (movieResult, width = 300) => ({\n  ...movieResult,\n  backdrop_path:\n    movieResult.backdrop_path && `${TMDB_IMAGE_BASE_URL(width)}${movieResult.backdrop_path}`,\n  poster_path: movieResult.poster_path && `${TMDB_IMAGE_BASE_URL(width)}${movieResult.poster_path}`\n});\n\nexport const getMoviesList = (moviesResponse) => {\n  return !!moviesResponse\n    ? [\n        ...moviesResponse.results\n          .map((movieResult) => updateMoviePictureUrls(movieResult))\n          .sort((a, b) => b.popularity - a.popularity)\n      ]\n    : null;\n};\n","import styled from 'styled-components';\n\nconst MovieList = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  justify-content: space-between;\n  align-content: stretch;\n  align-items: flex-start;\n\n  & > * {\n    margin: 6px;\n  }\n`;\n\nexport default MovieList;\n","import { Spinner } from '@blueprintjs/core';\nimport React from 'react';\n\n/*const styles = {\n  refreshStyle: {\n    position: 'relative',\n    display: 'block',\n    margin: '0 auto'\n  }\n};*/\n\nfunction LoaderComponent({ isLoading, children }) {\n  if (isLoading) {\n    return <Spinner size={50} value={null} />;\n  }\n  // Render nothing if no children present\n  return children ? children : null;\n}\n\nexport default LoaderComponent;\n","// List of movie modal action type keys\n/*export const modalKeys = {\n  OPEN_MOVIE_MODAL: 'OPEN_MOVIE_MODAL',\n  CLOSE_MOVIE_MODAL: 'CLOSE_MOVIE_MODAL'\n};*/\n\nexport const OPEN_MOVIE_MODAL = 'OPEN_MOVIE_MODAL';\nexport const CLOSE_MOVIE_MODAL = 'CLOSE_MOVIE_MODAL';\n\n// Opens the <MovieModal /> with a movieId\nexport const openMovieModal = (movieId) => {\n  return {\n    type: OPEN_MOVIE_MODAL,\n    movieId\n  };\n};\n\n// Closes the <MovieModal />\nexport const closeMovieModal = () => {\n  return {\n    type: CLOSE_MOVIE_MODAL\n  };\n};\n","import { Intent, Tag } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport { withLoading } from './helpers';\n\nconst MoviePoster = withLoading(styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-content: stretch;\n  align-items: center;\n  cursor: pointer;\n  max-width: ${(props) => props.maxWidth || '100%'};\n\n  & > * {\n    margin-bottom: 2px;\n  }\n`);\n\nconst Image = styled.img`\n  max-width: 100%;\n`;\n\nconst Title = styled(({ ...props }) => <Tag fill={true} intent={Intent.PRIMARY} {...props} />)``;\n\n/* */\nMoviePoster.Image = Image;\nMoviePoster.Title = Title;\n\nexport default MoviePoster;\n","import { Classes } from '@blueprintjs/core';\nimport * as React from 'react';\n\nexport function withLoading(Component) {\n  return (props) => <Component className={props.loading && Classes.SKELETON} {...props} />;\n}\n","import React from 'react';\n\nimport MoviePoster from '../blocks/MoviePoster';\n\nconst MovieCard = ({ movie, onClick }) => {\n  return (\n    <MoviePoster onClick={onClick} maxWidth=\"300px\">\n      <MoviePoster.Image src={movie.poster_path} />\n      <MoviePoster.Title>{movie.title}</MoviePoster.Title>\n    </MoviePoster>\n  );\n};\n\nexport default MovieCard;\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { openMovieModal } from '../actions/modal';\nimport MovieCard from '../components/MovieCard';\n\nconst MovieContainer = ({ movie }) => {\n  const dispatch = useDispatch();\n\n  const clickOpenMovieModal = useCallback(() => dispatch(openMovieModal(movie.id)), [\n    dispatch,\n    movie.id\n  ]);\n\n  return <MovieCard movie={movie} onClick={clickOpenMovieModal} />;\n};\n\nexport default MovieContainer;\n","import React from 'react';\n\nimport MovieList from '../blocks/MovieList';\nimport LoaderComponent from '../components/Loader';\nimport MovieContainer from './MovieContainer';\n\nconst MovieGroup = ({ movies, isLoading }) => {\n  return (\n    <MovieList>\n      {movies &&\n        movies.map((movie) => <MovieContainer movie={movie} key={movie.id}></MovieContainer>)}\n      <LoaderComponent isLoading={isLoading} />\n    </MovieList>\n  );\n};\n\nexport default MovieGroup;\n","import { Classes, Dialog, H1, H5 } from '@blueprintjs/core';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components/macro';\n\nimport { getMovieDetails } from '../actions';\nimport { closeMovieModal } from '../actions/modal';\nimport Loader from '../components/Loader';\n\n/*const styles = {\n  // Can use functions to dynamically build our CSS\n  dialogContent: (backgroundUrl) => ({\n    backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${backgroundUrl})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: '100%',\n    height: '100%',\n    minHeight: 400,\n    color: 'white',\n    padding: 10\n  })\n};*/\n\nconst StyledDialog = styled(Dialog)`\n  /*.bp3-dialog-body {\n    background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)),\n      url(${(props) => props.backgroundImg});\n    background-repeat: no-repeat;\n    background-size: 100%;\n    height: 100%;\n    min-height: 400px;\n    color: white;\n  }*/\n`;\n\n/* Custom hook */\nconst useFormatMovie = (movie) => {\n  movie = movie || {};\n\n  return useMemo(\n    () => ({\n      ...movie,\n      date: (movie.release_date && new Date(movie.release_date).toLocaleDateString()) || '',\n      genres: movie.genres ? movie.genres.map((genre) => genre.name).join(', ') : '',\n      budget: (movie.budget && `$${movie.budget.toLocaleString()}`) || '(unknown)'\n    }),\n    [movie]\n  );\n};\n\nconst MovieModal = () => {\n  const dispatch = useDispatch();\n\n  const { isOpen, movieId, isLoading, response } = useSelector(\n    (state) => ({\n      isOpen: state.movieBrowser.movieModal.isOpen || false,\n      movieId: state.movieBrowser.movieModal.movieId,\n      isLoading: state.movieBrowser.movieDetails.isLoading || false,\n      response: state.movieBrowser.movieDetails.response\n    }),\n    shallowEqual\n  );\n\n  /* */\n  useEffect(() => {\n    if (movieId) {\n      dispatch(getMovieDetails(movieId));\n    }\n  }, [dispatch, movieId]);\n\n  /* */\n  const { title, date, genres, overview, popularity, budget } = useFormatMovie(response);\n\n  /* */\n  const clickCloseMovieModal = useCallback(() => {\n    dispatch(closeMovieModal());\n  }, [dispatch]);\n\n  return (\n    <StyledDialog title={null} onClose={clickCloseMovieModal} isOpen={isOpen}>\n      <div className={Classes.DIALOG_BODY}>\n        <Loader isLoading={isLoading}>\n          <H1>{title}</H1>\n          <H5>{date}</H5>\n          <H5>{genres}</H5>\n          <p>{overview}</p>\n          <p>Popularity: {popularity}</p>\n          <p>Budget: {budget}</p>\n        </Loader>\n      </div>\n    </StyledDialog>\n  );\n};\n// \"connect\" our movie modal to the component store\n/*export default connect(\n  // Map nodes in our state to a properties of our component\n  (state) => ({\n    // Using lodash get, recursively check that a property is defined\n    // before try to access it - if it is undefined, it will return your default value\n    // _.get(object, 'path.to.targets[0].neat.stuff', defaultValue)\n    isOpen: _.get(state, 'movieBrowser.movieModal.isOpen', false),\n    movieId: _.get(state, 'movieBrowser.movieModal.movieId'),\n    movie: _.get(state, 'movieBrowser.movieDetails.response', {}),\n    isLoading: _.get(state, 'movieBrowser.movieDetails.isLoading', false)\n  }),\n  // Map an action to a prop, ready to be dispatched\n  { closeMovieModal, getMovieDetails }\n)(MovieModalContainer);*/\n\nexport default MovieModal;\n","import { Alignment, Navbar, NavbarGroup, NavbarHeading } from '@blueprintjs/core';\nimport { DateInput } from '@blueprintjs/datetime';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components/macro';\n\nimport { getMovies } from '../actions';\nimport * as scrollHelpers from '../common/scroll.helpers';\nimport * as movieHelpers from './helpers';\nimport MovieGroup from './MovieGroup';\nimport MovieModal from './MovieModal';\n\nconst StyledContentDiv = styled.div`\n  && {\n    margin-top: 64px; /* Bar height */\n  }\n`;\n\nconst StyledGridDiv = styled.div`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-content: stretch;\n    align-items: flex-start;\n    & > * {\n      margin: 12px;\n    }\n  }\n`;\n\nconst MoviePage = () => {\n  const dispatch = useDispatch();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [birthDate, setBirthDate] = useState(new Date('1983-06-13'));\n\n  const { response, isLoading } = useSelector((state) => state.movieBrowser.movieList);\n  const movies = movieHelpers.getMoviesList(response); // TODO useMemo when response changes\n\n  /* */\n  const handleDateChange = (date, isUserChange) => {\n    if (isUserChange) {\n      setBirthDate(new Date(date));\n    }\n  };\n\n  /* Effect to handle birth date changes (including first page load) */\n  useEffect(() => {\n    dispatch(getMovies(birthDate, 1, true)); // reset results = true\n  }, [dispatch, birthDate]);\n\n  /* Effect to handle window scroll changes */\n  useEffect(() => {\n    const handleScroll = () => {\n      if (!isLoading) {\n        let percentageScrolled = scrollHelpers.getScrollDownPercentage(window);\n        if (percentageScrolled > 0.8) {\n          const nextPage = currentPage + 1;\n          dispatch(getMovies(birthDate, nextPage));\n          setCurrentPage(nextPage);\n        }\n      }\n    };\n    window.onscroll = handleScroll;\n\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [dispatch, currentPage, isLoading, birthDate]);\n\n  /* */\n  return (\n    <>\n      <Navbar fixedToTop={true} className=\"bp3-dark\">\n        <NavbarGroup align={Alignment.LEFT}>\n          <NavbarHeading>Season Movies</NavbarHeading>\n        </NavbarGroup>\n      </Navbar>\n      <StyledContentDiv>\n        <div></div>\n        <StyledGridDiv>\n          <div>\n            <DateInput\n              formatDate={(date) => date.toLocaleDateString()}\n              onChange={handleDateChange}\n              parseDate={(str) => new Date(str)}\n              placeholder={'D/M/YYYY'}\n              minDate={new Date('1902-01-01')}\n            />\n          </div>\n          <div>\n            <MovieGroup movies={movies} isLoading={isLoading} />\n          </div>\n        </StyledGridDiv>\n      </StyledContentDiv>\n      <MovieModal />\n    </>\n  );\n};\n\nexport default MoviePage;\n","export const getScrollDownPercentage = (window) => {\n  const pageHeight = window.document.documentElement.scrollHeight;\n  const clientHeight = window.document.documentElement.clientHeight;\n  const scrollPos = window.pageYOffset;\n  const currentPosition = scrollPos + clientHeight;\n  const percentageScrolled = currentPosition / pageHeight;\n  return percentageScrolled;\n};\n","import { CLOSE_MOVIE_MODAL, OPEN_MOVIE_MODAL } from '../actions/modal';\nimport { createReducer } from '../common/redux.helpers';\n\n// Placeholder reducer for our movie modal\nconst movieModalReducer = createReducer(\n  { isOpen: false, movieId: undefined },\n  {\n    [OPEN_MOVIE_MODAL]: (state, action) => ({\n      isOpen: true,\n      movieId: action.movieId\n    }),\n    [CLOSE_MOVIE_MODAL]: (state, action) => ({\n      // Persist the movieId (and any other state tree objects)\n      ...state,\n      isOpen: false\n    })\n  }\n);\n\nexport default movieModalReducer;\n","import { combineReducers } from 'redux';\n\nimport { GET_MOVIE_DETAILS, GET_MOVIES, SEARCH_MOVIES } from '../actions';\nimport { createAsyncReducer } from '../common/redux.helpers';\nimport movieModalReducer from './modal';\n\nconst movieStartReducer = (state, action) => {\n  // Reset current results if date changes\n  const response = state.response && !action.request.reset ? { ...state.response } : undefined;\n  return {\n    ...state,\n    isLoading: true,\n    request: action.request,\n    response: response\n  };\n};\n\n// This will create a new state with both the existing\n// movies and new pages of movies\nconst moviesSuccessReducer = (state, action) => {\n  const existingMovies = state.response ? state.response.results : [];\n  // Create a new state object to be returned\n  // When creating the new state, be sure to include any\n  // existing properties we want to persist\n  return {\n    ...state,\n    isLoading: false,\n    response: {\n      ...action.response,\n      results: [...existingMovies, ...action.response.results]\n    }\n  };\n};\n\n// Combines our movie browser related reducers to build our movieBrowser reducer\nconst movieBrowserReducer = combineReducers({\n  movieModal: movieModalReducer,\n  movieList: createAsyncReducer(GET_MOVIES, {\n    [`${GET_MOVIES}_START`]: movieStartReducer,\n    [`${GET_MOVIES}_SUCCESS`]: moviesSuccessReducer\n  }),\n  movieSearch: createAsyncReducer(SEARCH_MOVIES, {\n    [`${SEARCH_MOVIES}_SUCCESS`]: moviesSuccessReducer\n  }),\n  movieDetails: createAsyncReducer(GET_MOVIE_DETAILS)\n});\n\nexport default movieBrowserReducer;\n","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { createLogger } from 'redux-logger';\nimport thunkMiddlware from 'redux-thunk';\n\nimport movieBrowserReducer from '../reducers';\n\n// The root reducer will serve as the parent for all other reducers\n// We will add our module reducers to the root level here\nconst rootReducer = combineReducers({\n  movieBrowser: movieBrowserReducer\n});\n\n// Will log information about dispatched actions to the console\n// including the previous state, the action details, and the next state\nconst loggerMiddleware = createLogger();\n\nconst store = createStore(\n  // reducer\n  rootReducer,\n  // preloadedState\n  undefined,\n  // apply devtools\n  composeWithDevTools(\n    // compose simply enables us to apply several store enhancers\n    // Right now, we are only using applyMiddlware, so this is\n    // just future-proofing our application\n    compose(\n      // Middlware can intercept dispatched actions before they reach the reducer\n      // in order to modify it in some way\n      applyMiddleware(\n        // Thunk allows functions to be returned from action creators\n        // so we can do things like dispatch multiple actions in a\n        // single action creator for async actions\n        thunkMiddlware,\n        // logger will output the previous state, next state, and\n        // the action details to the console\n        loggerMiddleware\n      )\n    )\n  )\n);\n\nexport default store;\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { createGlobalStyle, ThemeProvider } from 'styled-components/macro';\n\nimport MoviePage from './containers/MoviePage';\nimport store from './store';\n\n// import { Button, Card, H5, Classes } from '@blueprintjs/core';\nconst GlobalStyle = createGlobalStyle`\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n  }\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n  }\n`;\n\n// TODO move to a file\nconst theme = {\n  colors: {\n    lightGray1: '#CED9E0',\n    lightGray2: '#D8E1E8',\n    lightGray3: '#E1E8ED',\n    lightGray4: '#EBF1F5',\n    lightGray5: '#F5F8FA'\n  }\n};\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <>\n          <MoviePage />\n          <GlobalStyle />\n        </>\n      </Provider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import '@blueprintjs/core/lib/css/blueprint.css';\nimport '@blueprintjs/datetime/lib/css/blueprint-datetime.css';\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css';\nimport '@blueprintjs/select/lib/css/blueprint-select.css';\nimport '@blueprintjs/table/lib/css/table.css';\nimport 'normalize.css/normalize.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}